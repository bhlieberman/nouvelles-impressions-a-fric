{"version":3,"sources":["portfolio/ui/scene.cljs"],"mappings":";AAGA,yCAAA,zCAAMA,0FAAqBC,MAAMC;AAAjC,AACE,4DAAA,mFAAA,wIAAA,hRAACC,+CAAOF,0IAAW,AAAA,gFAAKC;;AAE1B,qCAAA,rCAAME,kFAAYH,MAAMC,MAAMG;AAA9B,AACE,GAAI,AAACC,qBAAKD;AACR,OAACE,uGAAMF,MAAM,AAACL,uCAAoBC,MAAMC;;AACxCG;;;AAEJ,gCAAA,hCAAMG,wEAAYP,MAAMC;AAAxB,AACE,GACE,AAACI,qBAAK,AAAA,sFAASJ;uFAEV,AAACO,4CAAI,WAAAC,9IACL,oDAAA,7CAACK;AADI,AAAA,IAAAJ,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAAME;QAAN,AAAAD,4CAAAD,WAAA,IAAA,/DAAQG;AAAR,AAAA,0FAAaD,EAAE,AAACT,mCAAWH,MAAMC,MAAMY;GAD5C,AAAA,sFAASZ;;AAFhB,GAME,AAACc,sBAAM,AAAA,sFAASd;AAChB,mDAAA,WAAAe,vDAACR;AAAD,AAAM,sDAAAQ,/CAACb,mCAAWH,MAAMC;GAAS,AAAA,sFAASA;;AAP5C,AAUE,OAACE,mCAAWH,MAAMC,MAAM,AAAA,sFAASA;;;;;AAErC,mCAAA,nCAAMgB,8EAAejB,MAAMC;AAA3B,AACE,IAAMiB,SAAO,AAACX,8BAAWP,MAAMC;AAA/B,AACE,IAAAkB,WAAQ,oDAAA,pDAACC,8CAAMnB,oFAAwB,AAACoB,2BAAcH;IAAtDC,eAAA,kBACE,AAAA,6FAAYlB,QACZ,8CAAAkB,SAAA,qEAAA,5HAACC;AAAD,AAAsB,OAAA,6FAAYnB;IAFpCkB;AAAA,AAAA,oBAIE,AAAA,mGAAelB;AACf,qDAAAkB,aAAA,qEAAA,hIAACC;mCAADE;AAAA,AAAsB,sKAAAA,/JAACC,8CAAM,AAAA,mGAAetB,OAAOiB;;;IAAnDI;;;;EAAAA;;oCAAAA;;;IAAAA;0BAAAA;;;;;;;AALFH;;;AAOJ,8BAAA,9BAAMK,oEAAUvB;AAAhB,AAAA,0FACG,AAAA,kFAAOA,OAAO,AAAA,iFAAMA;;AAEvB,qCAAA,6CAAAwB,lFAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;aAAA,AAAAE,4CAAAF,eAAA,pEAA+BR;AAA/B,AAEO,sDAAA,WAAAc,1DAACC;AAAD,AAAS,GAAA,GAAA,CAAAD,oBAAA;AAAA,GAAA,EAAA,CAAA,AAAAA,uDAAA,UAAA,CAAAE,gCAAA,AAAAF;AAAA;;AAAA,GAAA,EAAA,AAAAA;AAAA,OAAAG,uDAAAH,rBAAYI;;AAAZ;;;;AAAA,OAAAD,uDAAAH,rBAAYI;;GADrB,AAACN,mBAASf,sBAAMgB,mBAASb","names":["portfolio.ui.scene/get-param-overrides","state","scene","cljs.core.get_in","portfolio.ui.scene/get-param*","param","cljs.core/map?","cljs.core.merge","portfolio.ui.scene/get-params","cljs.core.map","p__30295","vec__30297","cljs.core.nth","k","v","cljs.core.into","cljs.core/coll?","p1__30273#","portfolio.ui.scene/prep-scene-fn","params","G__30332","cljs.core.assoc","portfolio.ui.code/code-str","rest__30327#","cljs.core.apply","portfolio.ui.scene/sort-key","p__30346","map__30347","cljs.core/--destructure-map","cljs.core.get","portfolio.ui.scene/get-scene-atoms","cljs.core/tree-seq","cljs.core/identity","p1__30344#","cljs.core.filter","cljs.core/PROTOCOL_SENTINEL","cljs.core/native-satisfies?","cljs.core/IWatchable"],"sourcesContent":["(ns portfolio.ui.scene\n  (:require [portfolio.ui.code :as code]))\n\n(defn get-param-overrides [state scene]\n  (get-in state [:ui (:id scene) :overrides]))\n\n(defn get-param* [state scene param]\n  (if (map? param)\n    (merge param (get-param-overrides state scene))\n    param))\n\n(defn get-params [state scene]\n  (cond\n    (map? (:params scene))\n    (->> (:params scene)\n         (map (fn [[k v]] [k (get-param* state scene v)]))\n         (into {}))\n\n    (coll? (:params scene))\n    (map #(get-param* state scene %) (:params scene))\n\n    :else\n    (get-param* state scene (:params scene))))\n\n(defn prep-scene-fn [state scene]\n  (let [params (get-params state scene)]\n    (cond-> (assoc scene :component-params (code/code-str params))\n      (:component scene)\n      (assoc :component-fn #(:component scene))\n\n      (:component-fn scene)\n      (assoc :component-fn #(apply (:component-fn scene) params %&)))))\n\n(defn sort-key [scene]\n  [(:line scene) (:idx scene)])\n\n(defn get-scene-atoms [{:keys [params]}]\n  (->> (tree-seq coll? identity params)\n       (filter #(satisfies? cljs.core/IWatchable %))))\n"],"x_google_ignoreList":[0]}