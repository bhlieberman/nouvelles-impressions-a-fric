{"version":3,"sources":["portfolio/ui/canvas.cljs"],"mappings":"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","names":["portfolio.ui.components.canvas/CanvasView","portfolio.ui.canvas/view-impl","portfolio.ui.canvas/get-current-addon","location","addons","or__5045__auto__","temp__5804__auto__","id","G__32674","cljs.core.keyword","cljs.core/first","cljs.core.filter","cljs.core.comp","portfolio.ui.canvas/prepare-panel","state","scene","current-addon","minimize-path","content","portfolio.ui.canvas.protocols/prepare-panel-content","minimized?","cljs.core.get_in","cljs.core/not","iter__5523__auto__","s__32690","cljs.core/LazySeq","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__32692","cljs.core/chunk-buffer","i__32691","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__32689","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","addon","G__32693","G__32712","cljs.core._EQ_","cljs.core.assoc","cljs.core.not_EQ_","portfolio.ui.routes/get-addon-url","portfolio.ui.canvas/get-tool-defaults","tools","cljs.core.apply","cljs.core/merge","cljs.core.map","portfolio.ui.canvas.addons/get-default-value","portfolio.ui.canvas/toolbar-value?","tool","cljs.core/PROTOCOL_SENTINEL","cljs.core/native-satisfies?","portfolio.ui.canvas.protocols/ICanvasToolValue","cljs.core/ifn?","cljs.core.get","cljs.core/meta","portfolio.ui.canvas/get-tool-values","p1__32722#","portfolio.ui.canvas.protocols/get-tool-value","var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","portfolio.ui.canvas/prepare-error","p__32759","p__32760","map__32761","cljs.core/--destructure-map","vec__32762","cljs.core.nth","seq32729","G__32730","cljs.core/next","self__5754__auto__","exception","cause","data","p1__32724#","cljs.core.update","portfolio.ui.code/code-str","cljs.core.conj","cljs.core/ex-data","params","p__32768","map__32769","portfolio.ui.canvas/prepare-canvas","options","canvas","map__32770","f","component-params","error","G__32772","cljs.core/assoc-in","cljs.core.partial","portfolio.ui.canvas.prepare_error","portfolio.ui.canvas/toolbar-button?","portfolio.ui.canvas.protocols/ICanvasToolbarButtonData","portfolio.ui.canvas/dark?","background","portfolio.ui.color/rgb->hsl","portfolio.ui.color/->rgb","portfolio.ui.canvas/create-button-groups","buttons","grouped","cljs.core/group-by","cljs.core.into","res","temp__5802__auto__","map__32787","button-group","button","cljs.core.dissoc","portfolio.ui.components.canvas-toolbar-buttons/ButtonGroup","cljs.core/with-meta","p__32788","map__32789","portfolio.ui.canvas/specifically-sized?","width","height","portfolio.ui.canvas/prepare-pane","view","ctx","scenes","p1__32790#","cljs.core.keep","portfolio.ui.canvas.protocols/prepare-toolbar-button","G__32791","portfolio.ui.canvas/canvas-tool?","portfolio.ui.canvas.protocols/ICanvasTool","portfolio.ui.canvas/pane-prepper?","portfolio.ui.canvas.protocols/ICanvasToolPaneMiddleware","portfolio.ui.canvas/prepare-scenes","layout","s__32802","b__32804","i__32803","iter__32801","cljs.core.sort_by","portfolio.ui.scene/sort-key","G__32805","G__32806","portfolio.ui.scene/prep-scene-fn","portfolio.ui.routes/get-scene-url","portfolio.ui.canvas/prepare-layout-pane","cljs.core.reduce","portfolio.ui.canvas.protocols/prepare-pane","portfolio.ui.canvas/prepare-layout-xs","root-layout","source","path","opt","G__32808","fexpr__32807","n","s__32810","b__32812","i__32811","vec__32813","iter__32809","vec__32824","i","x","cljs.core/vector","cljs.core.range","G__32816","G__32817","G__32818","G__32819","G__32820","G__32821","G__32822","G__32823","G__32827","G__32828","G__32829","G__32830","G__32831","G__32832","G__32833","G__32834","cljs.core.merge","p__32835","map__32836","portfolio.ui.canvas/prepare-layout","portfolio.ui.routes/get-id","portfolio.ui.canvas/prepare-canvas-view","map__32837","portfolio.ui.layout/get-current-layout","kind","target","G__32838","and__5043__auto__","phosphor.icons/load-icon!","portfolio.ui.canvas/view-prepper?","portfolio.ui.canvas.protocols/ICanvasToolMiddleware","portfolio.ui.canvas/prepare-view","portfolio.ui.canvas.protocols/prepare-view","portfolio.ui.canvas/data-impl","portfolio.ui.canvas/describe-missing-tool-id","p__32840","map__32841","portfolio.ui.canvas/describe-problem","message","p__32843","map__32844","portfolio.ui.canvas/create-canvas","cljs.core.remove","cljs.core.concat","p1__32842#","cljs.core.mapcat","cljs.core/chunk-first"],"sourcesContent":["(ns portfolio.ui.canvas\n  (:require [phosphor.icons :as icons]\n            [portfolio.ui.canvas.addons :as addons]\n            [portfolio.ui.canvas.protocols :as canvas]\n            [portfolio.ui.code :as code]\n            [portfolio.ui.color :as color]\n            [portfolio.ui.components.canvas :refer [CanvasView]]\n            [portfolio.ui.components.canvas-toolbar-buttons :refer [ButtonGroup]]\n            [portfolio.ui.layout :as layout]\n            [portfolio.ui.routes :as routes]\n            [portfolio.ui.scene :as scene]\n            [portfolio.ui.view :as view]))\n\n(def view-impl\n  {`view/render-view #'CanvasView})\n\n(defn get-current-addon [location addons]\n  (or (when-let [id (some-> location :query-params :addon keyword)]\n        (first (filter (comp #{id} :id) addons)))\n      (first addons)))\n\n(defn prepare-panel [state location scene addons]\n  (let [current-addon (get-current-addon location addons)\n        minimize-path [:canvas/panel :minimized?]\n        content (canvas/prepare-panel-content current-addon state scene)\n        minimized? (get-in state minimize-path (not content))]\n    {:tabs (for [addon addons]\n             (cond-> addon\n               (= current-addon addon)\n               (assoc :selected? true)\n\n               (not= current-addon addon)\n               (assoc :url (routes/get-addon-url location addon))))\n     :minimized? minimized?\n     :button (if minimized?\n               {:text \"Maximize\"\n                :actions [[:dissoc-in minimize-path]]\n                :direction :up}\n               {:text \"Minimize\"\n                :direction :down\n                :actions [[:assoc-in minimize-path true]]})\n     :content content}))\n\n(defn get-tool-defaults [tools]\n  (apply merge (map addons/get-default-value tools)))\n\n(defn toolbar-value? [tool]\n  (or (satisfies? canvas/ICanvasToolValue tool)\n      (ifn? (get (meta tool) `canvas/get-tool-value))))\n\n(defn get-tool-values [state id tools]\n  (->> tools\n       (filter toolbar-value?)\n       (map #(canvas/get-tool-value % state id))\n       (apply merge)))\n\n(defn prepare-error [{:keys [exception cause data]} & [scene]]\n  {:message (or (.-message exception)\n                (when exception\n                  (str \"Exception was not an Error instance: \" exception)))\n   :data (-> (map #(update % :data code/code-str) data)\n             (conj (when-let [data (ex-data exception)]\n                     {:label \"ex-data\"\n                      :data (code/code-str data)}))\n             (conj (when-let [params (:component-params scene)]\n                     {:label \"Component params\"\n                      :data params})))\n   :stack (.-stack exception)\n   :title (or cause \"Failed to render component\")})\n\n(defn prepare-canvas [options {:keys [scene] :as canvas}]\n  (let [f (-> canvas :scene :component-fn)\n        {:keys [id component-params]} scene\n        error (get-in canvas [:scene component-params :runtime-error])\n        canvas (assoc canvas :opt options)]\n    (cond-> canvas\n      (ifn? f) (assoc-in [:scene :component-fn] (partial f options))\n      (nil? error) (assoc-in [:scene :actions :report-render-error]\n                             [[:assoc-in\n                               [:scenes id component-params :runtime-error]\n                               {:exception :action/exception\n                                :info :action/info\n                                :cause :action/cause}]])\n      error (assoc-in [:scene :error] (prepare-error error scene)))))\n\n(defn toolbar-button? [tool]\n  (or (satisfies? canvas/ICanvasToolbarButtonData tool)\n      (ifn? (get (meta tool) `canvas/prepare-toolbar-button))))\n\n(defn dark? [background]\n  (when background\n    (< (:l (color/rgb->hsl (color/->rgb background))) 40)))\n\n(defn create-button-groups [buttons]\n  (loop [buttons buttons\n         grouped (->> buttons\n                      (filter :button-group)\n                      (group-by :button-group)\n                      (into {}))\n         res []]\n    (if-let [{:keys [button-group] :as button} (first buttons)]\n      (recur\n       (next buttons)\n       (dissoc grouped button-group)\n       (cond\n         (nil? button-group)\n         (conj res button)\n\n         (grouped button-group)\n         (conj res (with-meta\n                     {:buttons (grouped button-group)}\n                     {`canvas/render-toolbar-button #'ButtonGroup}))\n\n         :else res))\n      res)))\n\n(defn specifically-sized? [{:viewport/keys [width height]}]\n  (or (number? width) (number? height)))\n\n(defn prepare-pane [state view ctx]\n  (when-let [scenes (seq (:scenes ctx))]\n    (let [buttons (->> (:tools view)\n                       (filter toolbar-button?)\n                       (keep #(canvas/prepare-toolbar-button\n                               % state (dissoc ctx :scenes)))\n                       create-button-groups)\n          background (:background/background-color (:pane-options ctx))]\n      (cond-> {:kind :pane\n               :id (:pane-id ctx)\n               :canvases (map (partial prepare-canvas (:pane-options ctx)) scenes)\n               :class-name (if (dark? background)\n                             :dark\n                             :light)}\n        (seq buttons)\n        (assoc :toolbar {:buttons buttons})\n\n        (and (not (specifically-sized? (:pane-options ctx)))\n             (not (:gallery? (:layout ctx))))\n        (assoc :background background)))))\n\n(defn canvas-tool? [tool]\n  (or (satisfies? canvas/ICanvasTool tool)\n      (and (ifn? (get (meta tool) `canvas/prepare-canvas))\n           (ifn? (get (meta tool) `canvas/finalize-canvas)))))\n\n(defn pane-prepper? [tool]\n  (or (satisfies? canvas/ICanvasToolPaneMiddleware tool)\n      (ifn? (get (meta tool) `canvas/prepare-pane))))\n\n(defn prepare-scenes [state location view layout scenes]\n  (for [scene (sort-by scene/sort-key scenes)]\n    (let [tools (filter canvas-tool? (:tools view))]\n      (cond->\n          {:scene (scene/prep-scene-fn state scene)}\n        (seq (:css-paths state))\n        (assoc :css-paths (:css-paths state))\n\n        (:canvas-path state)\n        (assoc :canvas-path (:canvas-path state))\n\n        (seq tools)\n        (assoc :tools tools)\n\n        (:docs scene)\n        (assoc :title (:title scene)\n               :description (:docs scene))\n\n        (:code scene)\n        (assoc :code (:code scene))\n\n        (:gallery? layout)\n        (assoc :title (:title scene)\n               :url (routes/get-scene-url location scene))))))\n\n(defn prepare-layout-pane [state view ctx]\n  (let [f (->> (:tools view)\n               (filter pane-prepper?)\n               (reduce (fn [f tool]\n                         (partial canvas/prepare-pane tool f))\n                       prepare-pane))]\n    (f state view ctx)))\n\n(defn prepare-layout-xs [state location root-layout source view scenes path opt]\n  (if (#{:rows :cols} (:kind opt))\n    {:kind (:kind opt)\n     :xs (let [n (count (:xs opt))]\n           (for [[i x] (map vector (range) (:xs opt))]\n             (-> (prepare-layout-xs state location root-layout source view scenes (conj path i) x)\n                 (assoc (if (= :rows (:kind opt))\n                          :height\n                          :width)\n                        (str \"calc(100% / \" n \")\"))\n                 (assoc :offset (str \"calc((100% / \" n \") * \" i \")\"))\n                 ;; Using calc instead of calculating the value here means the\n                 ;; size won't be forcibly set unless the layout is different.\n                 ;; This allows us to have transient pane resize that isn't\n                 ;; represented in the store. Ideally we'll have the size in the\n                 ;; store eventually, but this gives us a nice POC for now.\n                 (assoc :handle (when (< i (dec n))\n                                  {:kind (if (= :rows (:kind opt))\n                                           :horizontal\n                                           :vertical)})))))}\n    (->> {:pane-id (::layout/pane-id opt)\n          :pane-options (merge (get-tool-defaults (:tools view))\n                               opt\n                               (get-tool-values state (::layout/pane-id opt) (:tools view)))\n          :pane-path path\n          :layout-path [:layout source]\n          :layout root-layout\n          :config-source source\n          :scenes scenes}\n         (prepare-layout-pane state view))))\n\n(defn prepare-layout [state location view {:keys [layout source]} scenes]\n  (let [scenes (prepare-scenes state location view layout scenes)]\n    (-> (prepare-layout-xs state location layout source view scenes [] layout)\n        (assoc :id (if (:gallery? layout)\n                     (routes/get-id location)\n                     :single-scene)\n               :height \"100%\"))))\n\n(defn prepare-canvas-view [state location view]\n  (let [layout (layout/get-current-layout state)\n        {:keys [scenes kind target]} (:current-selection state)]\n    (with-meta\n      (cond-> (if-let [error (first (:problems view))]\n                {:hud {:error error}}\n                (assoc (prepare-layout state location view layout scenes)\n                       :panel (when (and (= 1 (count scenes)) (seq (:addons view)))\n                                (prepare-panel state location (first scenes) (:addons view)))))\n        (and (:docs target) (= :collection kind))\n        (assoc\n         :title (:title target)\n         :description (:docs target))\n\n        (:error state)\n        (assoc :hud\n               {:action {:actions [[:dissoc-in [:error]]]\n                         :icon (icons/icon :phosphor.bold/x)}\n                :error (prepare-error (:error state))}))\n      view-impl)))\n\n(defn view-prepper? [tool]\n  (or (satisfies? canvas/ICanvasToolMiddleware tool)\n      (ifn? (get (meta tool) `canvas/prepare-view))))\n\n(defn prepare-view [view state location]\n  (let [f (->> (:tools view)\n               (filter view-prepper?)\n               (reduce (fn [f tool]\n                         (partial canvas/prepare-view tool f state location view))\n                       prepare-canvas-view))]\n    (f state location view)))\n\n(def data-impl\n  {`view/prepare-data #'prepare-view})\n\n(defn describe-missing-tool-id [tool]\n  {:title \"Badly configured canvas tool\"\n   :message [:span \"Canvas tool extensions must have an \" [:code \":id\"] \" or they won't work correctly. Please inspect this tool.\"]\n   :data [{:label \"Configuration\"\n           :data (code/code-str tool)}]})\n\n(defn describe-problem [tool {:keys [data message]}]\n  {:title \"Badly configured canvas tool\"\n   :message [:span message \" \" [:code (code/code-str data)]]\n   :data [{:label \"Configuration\"\n           :data (code/code-str (dissoc tool :problems))}]})\n\n(defn create-canvas [{:keys [tools addons layout]}]\n  (-> {:id ::canvas\n       :title \"Canvas\"\n       :tools (->> (filter :id tools)\n                   (remove :problems))\n       :addons addons\n       :layout (or layout {})\n       :problems (->> (remove :problems tools)\n                      (remove :id)\n                      (map describe-missing-tool-id)\n                      (concat (mapcat #(map (partial describe-problem %) (:problems %)) tools))\n                      seq)}\n      (with-meta data-impl)))\n"],"x_google_ignoreList":[0]}