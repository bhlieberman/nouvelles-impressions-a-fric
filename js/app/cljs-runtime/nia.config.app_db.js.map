{"version":3,"sources":["nia/config/app_db.cljs"],"mappings":"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","names":["cljs.spec.alpha/def-impl","cljs.spec.alpha/nilable-impl","cljs.core/record?","cljs.core/vector?","cljs.spec.alpha.every_impl","cljs.spec.alpha.tuple_impl","i__11666__auto__","v__11667__auto__","cljs.core.nth","cljs.core/map?","G__25423","cljs.core/keyword?","cljs.core/int?","G__25442","cljs.core/boolean?","G__25453","cljs.core/coll?","cljs.spec.alpha/map-spec-impl","G__25458","cljs.core/contains?","nia.config.app-db/check-db","re-frame.core/after","db","event","cljs.spec.alpha.valid_QMARK_","cljs.core.ex_info","cljs.spec.alpha/explain","nia.config.app-db/app-db"],"sourcesContent":["(ns nia.config.app-db\n  (:require\n   [cljs.spec.alpha :as s]\n   [shadow.resource :as rs]\n   [re-frame.core :refer [after]]))\n\n(s/def :app.routing/current-route (s/nilable record?))\n(s/def :app.user/history vector?)\n(s/def :cantos/footnotes (s/map-of keyword? map?))\n(s/def :poem/traversal-type keyword?)\n(s/def :poem/parens-depth int?)\n(s/def :poem/parens-loc (s/map-of int? keyword?))\n(s/def :search/results-showing? boolean?)\n(s/def :lunr/all-matches (s/coll-of map?))\n(s/def ::valid-db (s/keys :req [:app.routing/current-route\n                                :app.user/history\n                                :cantos/footnotes\n                                :poem/traversal-type\n                                :poem/parens-depth\n                                :poem/parens-loc\n                                :search/results-showing?]\n                          :opt [:lunr/all-matches]))\n\n(def check-db\n  (after (fn [db event] \n           (when-not (s/valid? ::valid-db db)\n             (throw (ex-info \"DB failed spec after event: \" {:event event\n                                                             :why (s/explain ::valid-db db)}))))))\n\n(def app-db {:app.routing/current-route nil\n             :app.user/history [] ;; perhaps every few clicks triggers a LocalStorage write?\n             :cantos/footnotes {:c1 {:p4/fn1 #js {:title \"c1-p4-fn1\"\n                                                  :id \"c1-p4-fn1\"\n                                                  :body (rs/inline \"footnotes/one/four_one.txt\")}}\n                                :c2 {:p2/fn1 #js {:title \"c2-p2-fn1\"\n                                                  :id \"c2-p2-fn1\"\n                                                  :body (rs/inline \"footnotes/two/two_one.txt\")}\n                                     :p3/fn1 #js {:title \"c2-p3-fn1\"\n                                                  :id \"c2-p3-fn1\"\n                                                  :body (rs/inline \"footnotes/two/three_one.txt\")}}\n                                :c4 {:p4/fn1 #js {:title \"c4-p4-fn1\"\n                                                  :id \"c4-p4-fn1\"\n                                                  :body (rs/inline \"footnotes/four/four_one.txt\")}\n                                     :p4/fn2 #js {:title \"c4-p4-fn2\"\n                                                  :id \"c4-p4-fn2\"\n                                                  :body (rs/inline \"footnotes/four/four_two.txt\")}\n                                     :p4/fn3 #js {:title \"c4-p4-fn3\"\n                                                  :id \"c4-p4-fn3\"\n                                                  :body (rs/inline \"footnotes/four/four_three.txt\")}\n                                     :p4/fn4 #js {:title \"c4-p4-fn4\"\n                                                  :id \"c4-p4-fn4\"\n                                                  :body (rs/inline \"footnotes/four/four_four.txt\")}\n                                     :p4/fn5 #js {:title \"c4-p4-fn5\"\n                                                  :id \"c4-p4-fn5\"\n                                                  :body (rs/inline \"footnotes/four/four_five.txt\")}}}\n             :poem/traversal-type :depth\n             :poem/parens-depth 0\n             :poem/parens-loc {0 :thesis\n                               1 :one\n                               2 :two\n                               3 :three\n                               4 :four\n                               5 :five}\n             :show-collapsed? true\n             :search/results-showing? false\n             :images/names {\"snowman.jpeg\" nil \"man-w-book.jpeg\" nil\n                            \"shutter.jpeg\" nil \"soldier.jpeg\" nil\n                            \"street.jpeg\" nil \"tree.jpeg\" nil\n                            \"astronomer.jpeg\" nil \"mountaineer.jpeg\" nil}\n             :images/urls []})\n\n(comment\n  (println (s/explain ::valid-db app-db)))"]}