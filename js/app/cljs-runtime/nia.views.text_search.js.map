{"version":3,"sources":["nia/views/text_search.cljs"],"mappings":";;;;;;AAKA,oCAAA,4CAAAA,hFAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;oBAAA,AAAAE,4CAAAF,eAAA,3EAA2BI;kBAA3B,AAAAF,4CAAAF,eAAA,zEAC2BK;oBAD3B,AAAAH,4CAAAF,eAAA,3EAE2BM;wBAF3B,AAAAJ,4CAAAF,eAAA,/EAG2BO;AAH3B,AAAA,0FAAA,oFAAA,2CAAA,qFAAA,mFAAA,qEAAA,mFAAA,yEAAA,2CAAA,oDAAA,0EAAA,iCAAA,mFAAA,qEAAA,mFAAA,uMAAA,2CAAA,qDAAA,yDAAA,kDAAA,kEAAA,mEAAA,0BAAA,6EAAA,8FAAA,mFAAA,qEAAA,mFAAA,wFAAA,2CAAA,qDAAA,wDAAA,wFAAA,9gEAIoCD,+2CAUnBF,wEACFC,6jBAEuCE;;AAEtD,uCAAA,vCAAMC;AAAN,AACE,cAAA,AAAAC,VAAMC,0BAAS,sDAAA,mFAAA,zIAACC;AAAhB,AAAA,4GAAA,lBACGC,+EAEA,6CAAA,7CAACC,8EACK,iBAAAC,qBAAA,6DAAAC;AAAA,AAAA,YAAAC,kBAAA,KAAA;AAAA,AAAA,IAAAD,eAAAA;;AAAA,AAAA,IAAAE,qBAAA,AAAAC,cAAAH;AAAA,AAAA,GAAAE;AAAA,AAAA,IAAAF,eAAAE;AAAA,AAAA,GAAA,AAAAE,6BAAAJ;AAAA,IAAAK,kBA+6EwC,AAAAuB,sBAAA5B;IA/6ExCM,qBAAA,AAAAC,gBAAAF;IAAAG,WAAA,AAAAC,uBAAAH;AAAA,AAAA,GAAA,AAAA,iBAAAI,WAAA;;AAAA,AAAA,GAAA,CAAAA,WAAAJ;AAAA,aAAA,AAAAK,eAAAN,gBAAAK,xCAAMU;AAAN,AAAA,AAAA,AAAAR,uBAAAJ,SAAA,mFACGa,cAAED;;AADL,eAAA,CAAAV,WAAA;;;;AAAA;;;;;AAAA,OAAAG,qBAAA,AAAAC,gBAAAN,UAAA,AAAAO,mDAAA,AAAAC,qBAAAhB;;AAAA,OAAAa,qBAAA,AAAAC,gBAAAN,UAAA;;;AAAA,aAAA,AAAAS,gBAAAjB,zBAAMoB;AAAN,AAAA,OAAAF,eAAA,gHAAA,AAAAH,mDAAA,AAAAI,eAAAnB,/FACGqB,cAAED;;;AADL;;;;GAAA,KAAA;;AAAA,AAAA,OAAArB,mBAAaJ;;;AAGxB,oCAAA,pCAAM2B;AAAN,AACE,2BAAA,AAAA5B,vBAAM6B,uCAAgB,sDAAA,mFAAA,zIAAC3B;AAAvB,AAAA,0FAAA,sHAAA,sGAAA,2CAAA,qDAAA,mFAAA,8DAAA,8EAAA,KAAA,gFAAA,KAAA,5aAEI4B,2eAGsB,WAAKC;AAAL,AACE,uBAAA,mFAAA,1GAACC,2LAA+BD;;AAChC,8BAAA,mFAAA,1GAACC;WACzBtC,0CACD,wCAAA,AAAA,2GAAA,jIAAMmC,yGACHI,wGACmB;AAAA,AACE,uBAAA,mFAAA,1GAACD;;AACD,8BAAA,mFAAA,1GAACA;GAJzB,sDAAA,wIAAA,rDAMIjC","names":["p__35794","map__35795","cljs.core/--destructure-map","cljs.core.get","nia.views.text-search/search-form","handle-change","handle-blur","handle-submit","submitting?","nia.views.text-search/search-results","cljs.core/deref","results","re_frame.core.subscribe","re-com.core/v-box","cljs.core.into","iter__5523__auto__","s__35797","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__35799","cljs.core/chunk-buffer","i__35798","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__35796","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","result","re-com.core/p","nia.views.text-search/text-search","modal-showing?","fork.re-frame/form","e","re-frame.core/dispatch","re-com.core/modal-panel","cljs.core/chunk-first"],"sourcesContent":["(ns nia.views.text-search\n  (:require [fork.re-frame :as fork]\n            [re-com.core :refer [modal-panel p v-box]]\n            [re-frame.core :refer [dispatch subscribe]]))\n\n(defn search-form [{:keys [handle-change\n                           handle-blur\n                           handle-submit\n                           submitting?]}]\n  [:form.row.g-3.m-auto {:on-submit handle-submit}\n   [:div.col-auto\n    [:label.lead.m-1\n     {:for :text-search}\n     \"Keyword search\"]]\n   [:div.col-auto\n    [:input.form-control.focus-ring.py-1.px-2.text-decoration-none.border-rounded-2\n     {:type :search\n      :id :text-search\n      :placeholder \"Shall I compare thee...\"\n      :on-change handle-change\n      :on-blur handle-blur}]]\n   [:div.col-auto\n    [:button.btn.btn-primary {:type :submit :disabled submitting?} \"Search\"]]])\n\n(defn search-results []\n  (let [results @(subscribe [:search/show-shortened])]\n    [v-box\n     :children\n     (into []\n           (for [result results]\n             [p result]))]))\n\n(defn text-search []\n  (let [modal-showing? @(subscribe [:search/results-showing?])]\n    [:div.ms-auto.d-flex.align-self-center\n     [fork/form {:path [:form]\n                 :prevent-default? true\n                 :clean-on-unmount? true\n                 :on-submit (fn [e]\n                              (dispatch [:search/submit-input e])\n                              (dispatch [:search/show-results]))}\n      search-form]\n     (when modal-showing?\n       [modal-panel\n        :backdrop-on-click (fn []\n                             (dispatch [:search/clear-results])\n                             (dispatch [:search/show-results]))\n        :child\n        [search-results]])]))\n"]}