{
"version":3,
"file":"module$node_modules$$mui$base$node$useListbox$useControllableReducer.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@mui/base/node/useListbox/useControllableReducer.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$mui$base$node$useListbox$useControllableReducer\"] = function(global,require,module,exports) {\n\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useControllableReducer;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _useListbox = require(\"./useListbox.types\");\nvar _areArraysEqual = _interopRequireDefault(require(\"../utils/areArraysEqual\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/**\n * Gets the current state. If the selectedValue is controlled,\n * the `value` prop is the source of truth instead of the internal state.\n */\nfunction getControlledState(internalState, props) {\n  if (props.value !== undefined) {\n    return (0, _extends2.default)({}, internalState, {\n      selectedValue: props.value\n    });\n  }\n  return internalState;\n}\nfunction areOptionsEqual(option1, option2, optionComparer) {\n  if (option1 === option2) {\n    return true;\n  }\n  if (option1 === null || option2 === null) {\n    return false;\n  }\n  return optionComparer(option1, option2);\n}\n\n/**\n * Triggers change event handlers (onChange and onHighlightChange) when reducer returns changed state.\n *\n * @param nextState The next state returned by the reducer.\n * @param internalPreviousState The previous state. If the component is controlled, this is merged with the props to determine the final state.\n * @param propsRef The props with defaults applied.\n * @param lastActionRef The last action that was dispatched.\n */\nfunction useStateChangeDetection(nextState, internalPreviousState, propsRef, lastActionRef) {\n  React.useEffect(() => {\n    if (!propsRef.current || lastActionRef.current === null) {\n      // Detect changes only if an action has been dispatched.\n      return;\n    }\n    if (lastActionRef.current.type === _useListbox.ActionTypes.setValue || lastActionRef.current.type === _useListbox.ActionTypes.setHighlight) {\n      // Don't fire change events when the value has been changed externally (e.g. by changing the controlled prop).\n      return;\n    }\n    const previousState = getControlledState(internalPreviousState, propsRef.current);\n    const {\n      multiple,\n      optionComparer\n    } = propsRef.current;\n    if (multiple) {\n      var _previousState$select;\n      const previousSelectedValues = (_previousState$select = previousState == null ? void 0 : previousState.selectedValue) != null ? _previousState$select : [];\n      const nextSelectedValues = nextState.selectedValue;\n      const onChange = propsRef.current.onChange;\n      if (!(0, _areArraysEqual.default)(nextSelectedValues, previousSelectedValues, optionComparer)) {\n        onChange == null ? void 0 : onChange(lastActionRef.current.event, nextSelectedValues);\n      }\n    } else {\n      const previousSelectedValue = previousState == null ? void 0 : previousState.selectedValue;\n      const nextSelectedValue = nextState.selectedValue;\n      const onChange = propsRef.current.onChange;\n      if (!areOptionsEqual(nextSelectedValue, previousSelectedValue, optionComparer)) {\n        onChange == null ? void 0 : onChange(lastActionRef.current.event, nextSelectedValue);\n      }\n    }\n\n    // Fires the highlightChange event when reducer returns changed `highlightedValue`.\n    if (!areOptionsEqual(internalPreviousState.highlightedValue, nextState.highlightedValue, propsRef.current.optionComparer)) {\n      var _propsRef$current, _propsRef$current$onH;\n      (_propsRef$current = propsRef.current) == null ? void 0 : (_propsRef$current$onH = _propsRef$current.onHighlightChange) == null ? void 0 : _propsRef$current$onH.call(_propsRef$current, lastActionRef.current.event, nextState.highlightedValue);\n    }\n    lastActionRef.current = null;\n  }, [nextState.selectedValue, nextState.highlightedValue, internalPreviousState, propsRef, lastActionRef]);\n}\n\n/**\n * @ignore - do not document.\n */\nfunction useControllableReducer(internalReducer, externalReducer, props) {\n  var _ref;\n  const {\n    value,\n    defaultValue,\n    multiple\n  } = props.current;\n  const actionRef = React.useRef(null);\n  const initialSelectedValue = (_ref = value === undefined ? defaultValue : value) != null ? _ref : multiple ? [] : null;\n  const initialState = {\n    highlightedValue: null,\n    selectedValue: initialSelectedValue\n  };\n  const combinedReducer = React.useCallback((state, action) => {\n    actionRef.current = action;\n    if (externalReducer) {\n      return externalReducer(getControlledState(state, action.props), action);\n    }\n    return internalReducer(getControlledState(state, action.props), action);\n  }, [externalReducer, internalReducer]);\n  const [nextState, dispatch] = React.useReducer(combinedReducer, initialState);\n  const dispatchWithProps = React.useCallback(action => {\n    dispatch((0, _extends2.default)({\n      props: props.current\n    }, action));\n  }, [dispatch, props]);\n  const previousState = React.useRef(initialState);\n  React.useEffect(() => {\n    previousState.current = nextState;\n  }, [previousState, nextState]);\n  useStateChangeDetection(nextState, previousState.current, props, actionRef);\n  return [getControlledState(nextState, props.current), dispatchWithProps];\n}\n};"],
"names":["shadow$provide","global","require","module","exports","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","getControlledState","internalState","props","undefined","value","_extends2","default","selectedValue","areOptionsEqual","option1","option2","optionComparer","useStateChangeDetection","nextState","internalPreviousState","propsRef","lastActionRef","React","useEffect","current","type","_useListbox","ActionTypes","setValue","setHighlight","previousState","multiple","_previousState$select","previousSelectedValues","nextSelectedValues","onChange","_areArraysEqual","event","nextSelectedValue","previousSelectedValue","highlightedValue","_propsRef$current","_propsRef$current$onH","onHighlightChange","call","_interopRequireDefault","Object","defineProperty","useControllableReducer","internalReducer","externalReducer","_ref","defaultValue","actionRef","useRef","initialState","initialSelectedValue","combinedReducer","useCallback","state","action","dispatch","useReducer","dispatchWithProps","_interopRequireWildcard","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","desc","set"]
}
